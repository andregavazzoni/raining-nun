{"version":3,"sources":["game/Game.js"],"names":["RainingNun","Game","console","log","prototype","preload","create","this","speed","game","physics","startSystem","Phaser","Physics","ARCADE","setBoundsToWorld","arcade","gravity","y","church","add","sprite","width","height","nunGroup","physicsGroup","demonGroup","priest","enable","body","collideWorldBounds","scale","setTo","allowGravity","score","labelScore","text","font","fill","timer","time","events","loop","addSprite","update","keyboard","input","overlap","nun","destroy","demon","endGame","isDown","Keyboard","LEFT","x","RIGHT","name","prompt","$","post","url","data","state","start","addNun","rnd","between","checkWorldBounds","outOfBoundsKill","velocity","onOutOfBounds","addDemon","rand","Math","floor","random"],"mappings":"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","file":"../../game/Game-debug.js","sourcesContent":["var RainingNun = RainingNun || {};\n\nRainingNun.Game = function () {\n    console.log(\"Game started...\");\n};\n\nRainingNun.Game.prototype = {\n    preload: function () {\n    },\n\n    create: function () {\n        this.speed = 3;\n        //World\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\n        this.game.physics.setBoundsToWorld();\n        this.game.physics.arcade.gravity.y = 100;\n\n        var church = this.game.add.sprite(0, 0, \"church\");\n        church.width = this.game.width;\n        church.height = this.game.height;\n\n        //Nun\n        this.nunGroup = this.game.add.physicsGroup();\n\n        //Demon\n        this.demonGroup = this.game.add.physicsGroup();\n\n        //Player\n        this.priest = this.game.add.sprite(this.game.width * 0.5, this.game.height - 120, \"priest\");\n        this.game.physics.enable(this.priest, Phaser.Physics.ARCADE);\n        this.priest.body.collideWorldBounds = true;\n        this.priest.scale.setTo(0.2, 0.2);\n        this.priest.body.allowGravity = false;\n\n        //Score\n        this.score = 0;\n        this.labelScore = this.game.add.text(20, 20, \"0\",\n            { font: \"30px Arial\", fill: \"#000000\" });\n\n        this.timer = this.game.time.events.loop(1200, this.addSprite, this);\n    },\n\n    update: function () {\n        var keyboard = this.game.input.keyboard;\n\n        this.game.physics.arcade.overlap(this.priest, this.nunGroup, function (priest, nun) {\n            nun.destroy();\n            this.score += 1;\n            this.labelScore.text = this.score;\n\n            this.game.physics.arcade.gravity.y = 100 * this.score;\n\n        }, null, this);\n\n\n        this.game.physics.arcade.overlap(this.priest, this.demonGroup, function (priest, demon) {\n            this.endGame();\n        }, null, this);\n\n        if (keyboard.isDown(Phaser.Keyboard.LEFT)) {\n            this.priest.x -= this.speed;\n        }\n\n        if (keyboard.isDown(Phaser.Keyboard.RIGHT)) {\n            this.priest.x += this.speed;\n        }\n    },\n\n    endGame: function () {\n        var name = prompt(\"Informe seu nome\");\n        $.post({\n            url: \"/save-score\",\n            data: {score: this.score, name: name}\n        });\n        this.game.state.start(\"MainMenu\")\n    },\n\n    addNun: function() {\n        var x = this.game.rnd.between(0, 220);\n        var nun = this.game.add.sprite(x, -20, 'nun');\n        this.nunGroup.add(nun);\n        this.game.physics.arcade.enable(nun);\n        nun.checkWorldBounds = true;\n        nun.outOfBoundsKill = true;\n        nun.body.velocity.y = 100;\n        nun.scale.setTo(0.15, 0.15);\n        nun.events.onOutOfBounds.add(this.endGame, this)\n    },\n\n    addDemon: function() {\n        var x = this.game.rnd.between(0, 220);\n        var demon = this.game.add.sprite(x, -20, 'demon');\n        this.demonGroup.add(demon);\n        this.game.physics.arcade.enable(demon);\n        demon.checkWorldBounds = true;\n        demon.outOfBoundsKill = true;\n        demon.body.velocity.y = 100;\n        demon.scale.setTo(0.04, 0.04);\n    },\n\n    addSprite: function () {\n        var rand = Math.floor((Math.random() * 100) + 1);\n\n        if (rand < 20) {\n            this.addDemon();\n        } else {\n            this.addNun();\n        }\n    }\n};"]}