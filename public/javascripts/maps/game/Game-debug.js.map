{"version":3,"sources":["game/Game.js"],"names":["RainingNun","Game","console","log","prototype","preload","create","this","speed","game","physics","startSystem","Phaser","Physics","ARCADE","setBoundsToWorld","arcade","gravity","y","church","add","sprite","width","height","nunGroup","physicsGroup","priest","enable","body","collideWorldBounds","scale","setTo","allowGravity","score","labelScore","text","font","fill","timer","time","events","loop","addNun","update","keyboard","input","overlap","nun","destroy","isDown","Keyboard","LEFT","x","RIGHT","endGame","name","prompt","$","post","url","data","state","start","rnd","between","checkWorldBounds","outOfBoundsKill","velocity","onOutOfBounds"],"mappings":"AAAA,GAAIA,YAAaA,cAEjBA,YAAWC,KAAO,WACdC,QAAQC,IAAI,oBAGhBH,WAAWC,KAAKG,WACZC,QAAS,aAGTC,OAAQ,WACJC,KAAKC,MAAQ,EAEbD,KAAKE,KAAKC,QAAQC,YAAYC,OAAOC,QAAQC,QAC7CP,KAAKE,KAAKC,QAAQK,mBAClBR,KAAKE,KAAKC,QAAQM,OAAOC,QAAQC,EAAI,GAErC,IAAIC,GAASZ,KAAKE,KAAKW,IAAIC,OAAO,EAAG,EAAG,SACxCF,GAAOG,MAAQf,KAAKE,KAAKa,MACzBH,EAAOI,OAAShB,KAAKE,KAAKc,OAG1BhB,KAAKiB,SAAWjB,KAAKE,KAAKW,IAAIK,eAG9BlB,KAAKmB,OAASnB,KAAKE,KAAKW,IAAIC,OAAyB,GAAlBd,KAAKE,KAAKa,MAAaf,KAAKE,KAAKc,OAAS,IAAK,UAClFhB,KAAKE,KAAKC,QAAQiB,OAAOpB,KAAKmB,OAAQd,OAAOC,QAAQC,QACrDP,KAAKmB,OAAOE,KAAKC,oBAAqB,EACtCtB,KAAKmB,OAAOI,MAAMC,MAAM,GAAK,IAC7BxB,KAAKmB,OAAOE,KAAKI,cAAe,EAGhCzB,KAAK0B,MAAQ,EACb1B,KAAK2B,WAAa3B,KAAKE,KAAKW,IAAIe,KAAK,GAAI,GAAI,KACvCC,KAAM,aAAcC,KAAM,YAEhC9B,KAAK+B,MAAQ/B,KAAKE,KAAK8B,KAAKC,OAAOC,KAAK,KAAMlC,KAAKmC,OAAQnC,OAG/DoC,OAAQ,WACJ,GAAIC,GAAWrC,KAAKE,KAAKoC,MAAMD,QAE/BrC,MAAKE,KAAKC,QAAQM,OAAO8B,QAAQvC,KAAKmB,OAAQnB,KAAKiB,SAAU,SAAUE,EAAQqB,GAC3EA,EAAIC,UACJzC,KAAK0B,OAAS,EACd1B,KAAK2B,WAAWC,KAAO5B,KAAK0B,OAC7B,KAAM1B,MAELqC,EAASK,OAAOrC,OAAOsC,SAASC,QAChC5C,KAAKmB,OAAO0B,GAAK7C,KAAKC,OAGtBoC,EAASK,OAAOrC,OAAOsC,SAASG,SAChC9C,KAAKmB,OAAO0B,GAAK7C,KAAKC,QAI9B8C,QAAS,WACL,GAAIC,GAAOC,OAAO,mBAClBC,GAAEC,MACEC,IAAK,cACLC,MAAO3B,MAAO1B,KAAK0B,MAAOsB,KAAMA,KAEpChD,KAAKE,KAAKoD,MAAMC,MAAM,aAG1BpB,OAAQ,WACJ,GAAIU,GAAI7C,KAAKE,KAAKsD,IAAIC,QAAQ,EAAG,KAC7BjB,EAAMxC,KAAKE,KAAKW,IAAIC,OAAO+B,EAAG,EAAG,MACrC7C,MAAKiB,SAASJ,IAAI2B,GAClBxC,KAAKE,KAAKC,QAAQM,OAAOW,OAAOoB,GAChCA,EAAIkB,kBAAmB,EACvBlB,EAAImB,iBAAkB,EACtBnB,EAAInB,KAAKuC,SAASjD,EAAI,IACtB6B,EAAIjB,MAAMC,MAAM,IAAM,KACtBgB,EAAIP,OAAO4B,cAAchD,IAAIb,KAAK+C,QAAS/C","file":"../../game/Game-debug.js","sourcesContent":["var RainingNun = RainingNun || {};\n\nRainingNun.Game = function () {\n    console.log(\"Game started...\");\n};\n\nRainingNun.Game.prototype = {\n    preload: function () {\n    },\n\n    create: function () {\n        this.speed = 3;\n        //World\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\n        this.game.physics.setBoundsToWorld();\n        this.game.physics.arcade.gravity.y = 100;\n\n        var church = this.game.add.sprite(0, 0, \"church\");\n        church.width = this.game.width;\n        church.height = this.game.height;\n\n        //Nun\n        this.nunGroup = this.game.add.physicsGroup();\n\n        //Player\n        this.priest = this.game.add.sprite(this.game.width * 0.5, this.game.height - 120, \"priest\");\n        this.game.physics.enable(this.priest, Phaser.Physics.ARCADE);\n        this.priest.body.collideWorldBounds = true;\n        this.priest.scale.setTo(0.2, 0.2);\n        this.priest.body.allowGravity = false;\n\n        //Score\n        this.score = 0;\n        this.labelScore = this.game.add.text(20, 20, \"0\",\n            { font: \"30px Arial\", fill: \"#000000\" });\n\n        this.timer = this.game.time.events.loop(1500, this.addNun, this);\n    },\n\n    update: function () {\n        var keyboard = this.game.input.keyboard;\n\n        this.game.physics.arcade.overlap(this.priest, this.nunGroup, function (priest, nun) {\n            nun.destroy();\n            this.score += 1;\n            this.labelScore.text = this.score;\n        }, null, this);\n\n        if (keyboard.isDown(Phaser.Keyboard.LEFT)) {\n            this.priest.x -= this.speed;\n        }\n\n        if (keyboard.isDown(Phaser.Keyboard.RIGHT)) {\n            this.priest.x += this.speed;\n        }\n    },\n\n    endGame: function () {\n        var name = prompt(\"Informe seu nome\");\n        $.post({\n            url: \"/save-score\",\n            data: {score: this.score, name: name}\n        });\n        this.game.state.start(\"MainMenu\")\n    },\n\n    addNun: function() {\n        var x = this.game.rnd.between(0, 220);\n        var nun = this.game.add.sprite(x, 0, 'nun');\n        this.nunGroup.add(nun);\n        this.game.physics.arcade.enable(nun);\n        nun.checkWorldBounds = true;\n        nun.outOfBoundsKill = true;\n        nun.body.velocity.y = 100;\n        nun.scale.setTo(0.15, 0.15);\n        nun.events.onOutOfBounds.add(this.endGame, this)\n    }\n};"]}